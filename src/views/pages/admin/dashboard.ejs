<div class="container">
    <h1 class="mb-4">Administrator Dashboard</h1>

    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card text-center h-100">
                <div class="card-body">
                    <h5 class="card-title">Users</h5>
                    <h2 class="display-4">
                        <%= userCount %>
                    </h2>
                    <p class="text-muted">Total registered users</p>
                    <a href="/admin/users" class="btn btn-primary">Manage Users</a>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card text-center h-100">
                <div class="card-body">
                    <h5 class="card-title">Completions</h5>
                    <h2 class="display-4">
                        <%= completionCount %>
                    </h2>
                    <p class="text-muted">Total question completions</p>
                    <a href="/er-diagrams/admin/submissions" class="btn btn-primary">View Submissions</a>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card text-center h-100">
                <div class="card-body">
                    <h5 class="card-title">Questions</h5>
                    <h2 class="display-4">
                        <%= questionCount %>
                    </h2>
                    <p class="text-muted">Available practice questions</p>
                    <a href="/topics" class="btn btn-primary">Manage Topics</a>
                </div>
            </div>
        </div>
    </div>

    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="mb-0">Data Export</h5>
                </div>
                <div class="card-body">
                    <h6 class="card-subtitle mb-3">Export User Completions Matrix</h6>
                    <p class="text-muted small mb-3">Exports a matrix where each row is a student and columns show
                        completion status (1/0) for each question.</p>
                    <form action="/admin/export/completions" method="GET" class="mb-4">
                        <div class="mb-3">
                            <label for="domain" class="form-label">Filter by Email Domain</label>
                            <select name="domain" id="domain" class="form-select">
                                <option value="all">All Domains</option>
                                <% domains.forEach(domain=> { %>
                                    <option value="<%= domain %>">
                                        <%= domain %>
                                    </option>
                                    <% }); %>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="code" class="form-label">Filter by Code</label>
                            <select name="code" id="code" class="form-select">
                                <option value="all">All Codes</option>
                                <% codes.forEach(code=> { %>
                                    <option value="<%= code %>">
                                        <%= code %>
                                    </option>
                                    <% }); %>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="topicId" class="form-label">Filter by Topic</label>
                            <select name="topicId" id="topicId" class="form-select">
                                <option value="all">All Topics</option>
                                <% topics.forEach(topic=> { %>
                                    <option value="<%= topic.id %>">
                                        <%= topic.name %>
                                    </option>
                                    <% }); %>
                            </select>
                        </div>

                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-download me-1"></i> Export Completions Matrix
                        </button>
                    </form>

                    <h6 class="card-subtitle mb-3">Export Completion Summary</h6>
                    <form action="/admin/export/summary" method="GET">
                        <div class="mb-3">
                            <label for="summaryDomain" class="form-label">Filter by Email Domain</label>
                            <select name="domain" id="summaryDomain" class="form-select">
                                <option value="all">All Domains</option>
                                <% domains.forEach(domain=> { %>
                                    <option value="<%= domain %>">
                                        <%= domain %>
                                    </option>
                                    <% }); %>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="summaryCode" class="form-label">Filter by Code</label>
                            <select name="code" id="summaryCode" class="form-select">
                                <option value="all">All Codes</option>
                                <% codes.forEach(code=> { %>
                                    <option value="<%= code %>">
                                        <%= code %>
                                    </option>
                                    <% }); %>
                            </select>
                        </div>

                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-download me-1"></i> Export Summary CSV
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="mb-0">Quick Navigation</h5>
                </div>
                <div class="card-body">
                    <div class="list-group">
                        <a href="/admin/users"
                            class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                            <div>
                                <i class="bi bi-people me-2"></i> User Management
                                <p class="text-muted mb-0 small">View, filter, and delete user accounts</p>
                            </div>
                            <i class="bi bi-chevron-right"></i>
                        </a>
                        <a href="/er-diagrams/admin/submissions"
                            class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                            <div>
                                <i class="bi bi-diagram-3 me-2"></i> ER Diagram Submissions
                                <p class="text-muted mb-0 small">Review and score student ER diagram submissions</p>
                            </div>
                            <i class="bi bi-chevron-right"></i>
                        </a>
                        <a href="/topics"
                            class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                            <div>
                                <i class="bi bi-list-ul me-2"></i> Topics Management
                                <p class="text-muted mb-0 small">Manage practice topics and questions</p>
                            </div>
                            <i class="bi bi-chevron-right"></i>
                        </a>
                        <a href="/admin/export/completions"
                            class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                            <div>
                                <i class="bi bi-download me-2"></i> Data Export
                                <p class="text-muted mb-0 small">Export user completions matrix and summary data</p>
                            </div>
                            <i class="bi bi-chevron-right"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .list-group-item {
        transition: all 0.2s ease-in-out;
    }

    .list-group-item:hover {
        background-color: #f8f9fa;
        transform: translateX(5px);
    }

    .card {
        transition: all 0.2s ease-in-out;
    }

    .card:hover {
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
    }
</style>